<head>
<title>Simple stupid graph api browser</title>
<meta name="Description" content="This is a stupid basic facebook graph api browser">
<!--Load JQuery--->
<script type="application/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<!-----------------The script to handle the event----------------------------->
	<script type="application/javascript">
		var authenticated=false;
		var access_token="";
		function PersonalizePage(){
			$.ajax({
			  url: "https://graph.facebook.com/me&"+access_token+"?callback=?",
			  dataType: 'json',
			  success:function(data, textStatus, jqXHR){
			      var container=document.getElementById("accesstokencontainer");
			      container.innerHTML="<br/> Authenticated with "+access_token+"<br/> Hello "+data.name+
						" <img src='http://graph.facebook.com/"+data.username+"/picture'></img>";
			  }
			})
			
		}
		function CheckAuthenticated(){
			var theparamraw=window.location.hash.substring(1);
			var arrofit=theparamraw.split("&");
			var testit=/.*access_token.*/;
			var i=0;
			while(i<arrofit.length){
			      theparam=arrofit[i];
			      if(testit.test(theparam)){
				      authenticated=true;
				      access_token=theparam;
				      var authbutton=document.getElementById("theautbutton");
				      var itparent=authbutton.parentNode;
				      itparent.removeChild(authbutton);
				      PersonalizePage();
				      break;
			      }
			      i=i+1;
			}
		}
		function ManualAuthentication(){
			window.location="https://www.facebook.com/dialog/oauth?client_id=199926100046355&redirect_uri=https://howtomakeafacebookapp.appspot.com/static/graphbrowser.html&response_type=token"
		}
		function onButtonRequest(){
			changeText("Requesting...");
			var thereq=document.getElementById("parameterbox").value;
			if(thereq==""){
			    changeText("Enter a request on the above textbox");
			    return;
			}
			var allparam=[];
			allparam.push("callback=?");
			if(authenticated){
				allparam.push(access_token);
			}
			if(document.getElementById("shouldautomet").checked){
				allparam.push("metadata=1");
			}
			var subchar="?";
			var scan=/.*?.*/;
			if(scan.test(theurl)){
			  subchar="&";
			}
			var theurl="https://graph.facebook.com/"+thereq+subchar+allparam.join("&");
			$.ajax({
			  url: theurl,
			  dataType: 'json',
			  success:function(data, textStatus, jqXHR){
			    changeText(data);
			  }
			})
		}
		function changeText(newtext){
			var thetext=JSON.stringify(newtext,null,4);
			document.getElementById("answertext").innerHTML = thetext;
		}
	</script>
	<style type="text/css">
		#parameterbox{
			width:400px;
		}
		#answerbox{
			width:95%;
			border: 2px solid black;
			text-align: left;
			word-wrap:break-word;
		}
	</style>
</head>


<body onload="CheckAuthenticated()">
<iframe src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fhowtomakeafacebookapp.appspot.com%2Fstatic%2Fgraphbrowser.html&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>
<center>
<h1>This is a simple and stupid plain text Graph API browser</h1>
<p1>Enter parameter: <input type="text" id="parameterbox" onkeydown="if (event.keyCode == 13)onButtonRequest()"/><button type="button" onclick="onButtonRequest()">Send Request</button></p1><br/>
<button type="button" onclick="ManualAuthentication()" id="theautbutton" >Authenticate</button>
<input type="checkbox" id="shouldautomet" /> Auto metadata 
<br/><div id="accesstokencontainer"></div>
<div id="answerbox"><pre id="answertext" align="left">The answer should be here</pre></div>
</center>
</body>
