$.widget("styler.StylerSlider",{options:{min:0,max:100,postfix:"px",nopostfixchange:!1,cssprop:"",selector:"",unitselector:[],registercss:!0,label:!0,sliderops:{}},_create:function(){function a(){var b=parseInt(j.val(),10),a=parseInt(k.val(),10)-b,b=b+a*(parseInt(f.slider("value"),10)/1E3)+d.options.postfix;h.val(b);d._trigger("change",0,b)}var d=this,b=d.options.cssprop,e=d.options.unitselector;if(""==b)throw"cssprop must not be empty";var c="";if(0!=e.length){for(var c="<select class='unitselector'>",
g=0;g<e.length;)c=c+"<option>"+e[g].name+"</option>",g+=1;c+="</select>"}d.options.label?$(this.element).append("<p><label for='"+b+"'>"+b+"</label><input class='sliderpreval' type=text name='"+b+"'></input>"+c+"</p>"):$(this.element).append("<input class='sliderpreval' type=text name='"+b+"'></input>"+c+"<br />");$(this.element).append("<input type='text' class='minunit minmax'/><div class='cssslider'></div><input type='text' class='maxunit minmax'/>");var f=$(this.element).children(".cssslider"),
h=$(this.element).find("[name="+b+"]"),i=$(this.element).find(".unitselector"),j=$(this.element).find("input.minunit"),k=$(this.element).find("input.maxunit");j.val(d.options.min);k.val(d.options.max);j.change(a);k.change(a);f.slider($.extend({},{max:1E3,min:0,step:0.1,change:a,slide:a},this.options.sliderops));0!=e.length&&i.change(function(){for(var b=i.val(),a=0;a<e.length;)e[a].name==b&&(d.postfix(e[a].postfix,!0),d._trigger("change",0,d.string())),a+=1});h.change(function(){var b=/(\d+)([^\s\d]*)/,
a=h.val();if(b.test(a)){var c=b.exec(a)[2],b=parseFloat(b.exec(a)[1]);d.postfix(c);c=parseFloat(j.val(),10);a=parseFloat(k.val(),10);c>b&&(j.val(parseFloat(b,10)),c=parseFloat(j.val(),10));a<b&&(k.val(parseFloat(b,10)),a=parseFloat(k.val(),10));c=1E3*(parseFloat(b)-parseFloat(c))/(a-c);f.slider("value",c)}else d._trigger("change",0,a)});this.options.registercss&&(c=function(b,a){""!=d.options.cssprop&&modifycss(d.options.selector,d.options.cssprop,a.toString())},this.options.change||(this.options.change=
c),registercsshandler(d.options.selector,b,function(b){d.string(b)}))},postfix:function(a,d){if(void 0==a)return this.options.postfix;if(!(this.options.nopostfixchange&&0==this.options.unitselector.length)){if(this.options.nopostfixchange){for(var b=!1,e=0,c=this.options.unitselector;e<c.length;)c[e].postfix==a&&(b=!0),e+=1;if(!b)return}var e=$(this.element).children(".cssslider"),c=$(this.element).find("input.minunit"),b=$(this.element).find("input.maxunit"),c=parseFloat(c.val(),10),g=parseFloat(b.val(),
10);this.options.postfix=a;b=$(this.element).find("[name="+this.options.cssprop+"]");e=(g-c)*e.slider("value")/1E3+c+this.options.postfix;b.val(e);if(!d&&0!=this.options.unitselector.length){b=$(this.element).find(".unitselector");c=this.options.unitselector;for(e=0;e<c.length;)c[e].postfix==a&&b.val(c[e].name),e+=1}}},string:function(a){if(void 0==a)return $(this.element).find("[name="+this.options.cssprop+"]").val();var d=/([\d.]+)([^\s\d.]*)/,b;if(/^\s*[\d.]+\s*$/.test(a))a=parseFloat(a,10),b=
this.options.postfix;else{$(this.element).find("[name="+this.options.cssprop+"]").val(a);if(!d.test(a))return;b=d.exec(a)[2];a=parseFloat(d.exec(a)[1],10)}this.postfix(b);b=$(this.element).children(".cssslider");var d=$(this.element).find("input.minunit"),e=$(this.element).find("input.maxunit"),c=parseFloat(d.val(),10),g=parseFloat(e.val(),10);c>a&&(d.val(parseFloat(a,10)),c=parseFloat(d.val(),10));g<a&&(e.val(parseFloat(a,10)),g=parseFloat(e.val(),10));a=1E3*(parseFloat(a)-parseFloat(c))/(g-c);b.slider("value",
a)}});
function radiobuilder(a){return function(d,b,e){e&&e.values&&$.extend(a,e.values);var e=d.replace(" ","_")+b.replace(" ","_"),c=$("<div id='"+e+"' style='inline-block'>"),g;for(g in a){var f=a[g],h=e+f.replace(" ","_"),i=$("<input></input>");i.attr("id",h);i.attr("value",f);i.attr("type","radio");i.attr("name",b.replace(" ","_"));var j=$("<label>");j.text(f);j.attr("for",h);c.append(i);c.append(j)}c.buttonset();c.find("input").change(function(){modifycss(d,b,$(this).val())});registercsshandler(d,b,
function(a){console.log("Radio change->"+b);a=c.find("input[value="+a+"]");a.attr("checked","checked");a.button("refresh")});return c}}var _counter=0;
function foursliderbuilder(a){return function(d,b,e){function c(){modifycss(d,b,j+" "+k+" "+o+" "+p)}var g={min:0,max:100,unitselector:[{name:"Percent",postfix:"%"},{name:"Pixel",postfix:"px"}]};$.extend(g,a,e,{registercss:!1});_counter+=1;var f=_counter.toString(),h=$("<div>"),e=$("<ul>");e.append("<li><a href='#single_"+f+"'>All</a></li>");g.nodoubletab||e.append("<li><a href='#double_"+f+"'>Horizontal/Vertical</a></li>");e.append("<li><a href='#quad_"+f+"'>Top/Right/Bottom/Left</a></li>");var i=
{all:b+"-all",horizontal:b+"-horizontal",vertical:b+"-vertical",top:b+"-top",right:b+"-right",bottom:b+"-bottom",left:b+"-left"};$.extend(i,g.labels);var j="",k="",o="",p="",l=$("<div id='vertical_"+f+"'>"),m=$("<div id='vertical_"+f+"'>"),n=$("<div id='vertical_"+f+"'>"),q=$("<div id='vertical_"+f+"'>"),r=$("<div id='vertical_"+f+"'>"),s=$("<div id='horizontal_"+f+"'>"),t=$("<div id='single_"+f+"'>"),v=$("<div id='single_"+f+"' style='padding:1ex;'>");v.append(t);var u=$("<div id='double_"+f+"' style='padding:1ex;'>");
u.append(r);u.append(s);f=$("<div id='quad_"+f+"' style='padding:1ex;'>");f.append(l);f.append(m);f.append(n);f.append(q);h.append(e);h.append(v);g.nodoubletab||h.append(u);h.append(f);h.tabs();registercsshandler(d,b,function(b){numberlist=b.split(" ");0==numberlist.length?console.log("Error, someone call setstring with an empty string."):1==numberlist.length?(t.StylerSlider("string",numberlist[0]),h.tabs("select",0)):2==numberlist.length?(r.StylerSlider("string",numberlist[0]),s.StylerSlider("string",
numberlist[1]),h.tabs("select",1)):4==numberlist.length&&(l.StylerSlider("string",numberlist[0]),m.StylerSlider("string",numberlist[1]),n.StylerSlider("string",numberlist[2]),q.StylerSlider("string",numberlist[3]),h.tabs("select",2))});l.StylerSlider($.extend({},{cssprop:i.top,change:function(){j=l.StylerSlider("string");c()}},g));m.StylerSlider($.extend({},{cssprop:i.right,change:function(){k=m.StylerSlider("string");c()}},g));n.StylerSlider($.extend({},{cssprop:i.bottom,change:function(){o=n.StylerSlider("string");
c()}},g));q.StylerSlider($.extend({},{cssprop:i.left,change:function(){p=q.StylerSlider("string");c()}},g));r.StylerSlider($.extend({},{cssprop:i.vertical,change:function(b,a){l.StylerSlider("string",a);n.StylerSlider("string",a)}},g));s.StylerSlider($.extend({},{cssprop:i.horizontal,change:function(b,a){m.StylerSlider("string",a);q.StylerSlider("string",a)}},g));t.StylerSlider($.extend({},{cssprop:i.all,change:function(b,a){r.StylerSlider("string",a);s.StylerSlider("string",a)}},g));return h}}
function selectionbuilder(a){return function(d,b){var e=$("<select>"),c;for(c in a)e.append("<option>"+a[c]+"</option>");e.change(function(){modifycss(d,b,$(this).val())});registercsshandler(d,b,function(b){e.val(b)});return e}}function defaultbuilder(a,d){var b=$("<input class='default'>");$(b).change(function(){modifycss(a,d,$(b).val())});registercsshandler(a,d,function(a){$(b).val(a)});return b}
function checkbox(a,d,b){var e=b.checked,c=b.unchecked,g=$("<input type='checkbox'>");$(g).change(function(){var b;b=g.attr("checked")?e:c;modifycss(a,d,b)});registercsshandler(a,d,function(b){b==e?g.attr("checked","checked"):g.attr("checked","")});return g}
function boxshadowbuilder(a){function d(){var b=k+" "+p+" "+l+" "+m+" "+n+" "+o;modifycss(a,"box-shadow",b);e.val(b)}var b=$("<div class='ui-corner-all ui-widget-content' style='padding:1ex'>"),e=$("<input></input>"),c=$("<input></input>"),g=$("<div>"),f=$("<div>"),h=$("<div>"),i=$("<div>"),j=$('<input type="checkbox">');b.append("Overall shadow:").append(e).append("<br />Color:").append(c).append(g).append(f).append(h).append(i).append("Inset:").append(j);var k="",o="#000",p="0px",l="0px",m="0px",
n="0px";registercsshandler(a,"box-shadow",function(b){var b=b.split(" "),a=0;"inset"==b[a].toLowerCase()&&(k="inset",j.attr("checked","checked"),a+=1);var e=b[a],a=a+1;p=e;g.StylerSlider("string",e);e=b[a];a+=1;l=e;f.StylerSlider("string",e);e=/#.*/;if(!e.test(b[a])){var d=b[a],a=a+1;m=d;h.StylerSlider("string",d)}e.test(b[a])||(e=b[a],a+=1,n=e,i.StylerSlider("string",e));b=b[a];c.val(b);c.ColorPickerSetColor(b)});e.change(function(){var b=e.val();modifycss(a,"box-shadow",b)});j.change(function(){k=
j.attr("checked")?"inset":"";d()});g.StylerSlider({min:-50,max:50,cssprop:"shadow_horizontal_offset",registercss:!1,change:function(b,a){p=a;d()}});f.StylerSlider({min:-30,max:30,cssprop:"shadow_vertical_offset",registercss:!1,change:function(b,a){l=a;d()}});h.StylerSlider({min:-30,max:30,cssprop:"shadow_blur_distance",registercss:!1,change:function(b,a){m=a;d()}});i.StylerSlider({min:-30,max:30,cssprop:"shadow_spread_distance",registercss:!1,change:function(b,a){n=a;d()}});c.ColorPicker({onShow:function(b){$(b).fadeIn(500);
return!1},onHide:function(b){$(b).fadeOut(500);return!1},onChange:function(b,a){c.css("backgroundColor","#"+a);c.val("#"+a);o="#"+a;d()}});c.change(function(){c.css("backgroundColor",c.val());o=c.val();d()});return b}
function colourbuilder(a,d){var b=$("<input>");b.ColorPicker({onShow:function(b){$(b).fadeIn(500);return!1},onHide:function(b){$(b).fadeOut(500);return!1},onChange:function(e,c){b.css("backgroundColor","#"+c);b.val("#"+c);modifycss(a,d,"#"+c)}});registercsshandler(a,d,function(a){console.log("color picker change to->"+a);b.val(a);"transparent"!=a&&b.ColorPickerSetColor(a);$(b).css("background-color",a)});b.change(function(){var e=b.val();b.ColorPickerSetColor(e);b.css("backgroundColor",e);modifycss(a,
d,e)});return b}
function textshadowbuilder(a){function d(){modifycss(a,"text-shadow",h+" "+i+" "+j+" "+k)}var b=$("<input>"),e=$("<div>"),c=$("<div>"),g=$("<div>"),f=$("<div class='ui-corner-all ui-widget-content' style='padding:1ex;'>");f.append("Text-shadow color:").append(b).append(e).append(c).append(g);var h="0px",i="0px",j="0px",k="#000000";registercsshandler(a,"text-shadow",function(a){var a=a.split(" "),d=0,f=a[d],d=d+1;h=f;e.StylerSlider("string",f);f=a[d];d+=1;i=f;c.StylerSlider("string",f);/#.*/.test(a[d])||
(f=a[d],d+=1,j=f,g.StylerSlider("string",f));a=a[d];b.val(a);b.ColorPickerSetColor(a)});e.StylerSlider({min:-50,max:50,nopostfixchange:!0,cssprop:"text-shadow-hoffset",registercss:!1,change:function(a,b){h=b;d()}});c.StylerSlider({min:-50,max:50,nopostfixchange:!0,cssprop:"text-shadow-voffset",registercss:!1,change:function(a,b){i=b;d()}});g.StylerSlider({min:0,max:50,nopostfixchange:!0,cssprop:"text-shadow-blur",registercss:!1,change:function(a,b){j=b;d()}});b.ColorPicker({onShow:function(a){$(a).fadeIn(500);
return!1},onHide:function(a){$(a).fadeOut(500);return!1},onChange:function(a,c){b.css("backgroundColor","#"+c);b.val("#"+c);k="#"+c;d()}});b.change(function(){b.css("backgroundColor",b.val());k=b.val();d()});return f}
function backgroundrepeatbuilder(a){function d(){var b="repeat-x"==g,c="repeat-y"==f,d="no-repeat";c&&(d="repeat-y");b&&(d="repeat-x");c&&b&&(d="repeat");modifycss(a,"background-repeat",d)}var b=$("<div>"),e=$('<input type="checkbox">'),c=$('<input type="checkbox">');b.append("repeat-x : ");b.append(e);b.append("<br />").append("repeat-y : ");b.append(c);var g="",f="";registercsshandler(a,"background-repeat",function(a){a=$.trim(a);"no-repeat"==a&&(f=g="",e.prop("checked",!1),c.prop("checked",!1));
"repeat"==a&&(g="repeat-x",f="repeat-y",e.prop("checked",!0),c.prop("checked",!0));"repeat-x"==a&&(g="repeat-x",e.prop("checked",!0),f="",c.prop("checked",!1));"repeat-y"==a&&(f="repeat-y",c.prop("checked",!0),g="",e.prop("checked",!1))});e.change(function(){g=e.attr("checked")?"repeat-x":"";d()});c.change(function(){f=c.attr("checked")?"repeat-y":"";d()});return b}
function backgroundurlbuilder(a,d){var b=$("<br /><input style='width:100%;'>"),e=/url\((.*)\)/;$(b).change(function(){var c=b.val();e.test(c)?modifycss(a,"background-image",c):modifycss(a,"background-image","url("+c+")")});registercsshandler(a,d,function(a){e.test(a)?b.val(e.exec(a)[1]):b.val(a)});return b}
function sliderbuilder(a){return function(d,b,e){d=$.extend({},{cssprop:b,selector:d,registercss:!0,label:!1,unitselector:[{name:"Percent",postfix:"%"},{name:"Pixel",postfix:"px"}]},a,e);b=$("<span>");b.StylerSlider(d);return b}}
var predefcustomcss={text:{type:"accordion",title:"text",controls:[{css:"font-family"},{css:"font-size"},{css:"text-align"},{css:"font-style"},{css:"font-weight"},{css:"text-transform"}]},border:{type:"accordion",title:"border",controls:[{css:"border-style"},{css:"border-color"},{css:"border-width"}]}},nolabel=["text","border"],nobr=["checkbox","colourbuilder"],predefbuilders={"border-color":colourbuilder,"border-width":foursliderbuilder({postfix:"px",min:0,max:20}),"border-style":selectionbuilder("none hidden dotted dashed solid double groove ridge inset outset inherit".split(" ")),
"border-radius":foursliderbuilder({nodoubletab:!0,labels:{all:"all",top:"top-left",right:"top-right",bottom:"bottom-right",left:"bottom-left"}}),"border-top-left-radius":sliderbuilder({min:0,max:100,postfix:"px"}),"border-top-right-radius":sliderbuilder({min:0,max:100,postfix:"px"}),"border-bottom-left-radius":sliderbuilder({min:0,max:100,postfix:"px"}),"border-bottom-right-radius":sliderbuilder({min:0,max:100,postfix:"px"}),"box-shadow":boxshadowbuilder,"background-color":colourbuilder,"background-image":backgroundurlbuilder,
"background-repeat":backgroundrepeatbuilder,color:colourbuilder,margin:foursliderbuilder({postfix:"px"}),"margin-top":sliderbuilder({min:0,max:100,postfix:"px"}),"margin-right":sliderbuilder({min:0,max:100,postfix:"px"}),"margin-bottom":sliderbuilder({min:0,max:100,postfix:"px"}),"margin-left":sliderbuilder({min:0,max:100,postfix:"px"}),padding:foursliderbuilder({postfix:"px"}),"padding-top":sliderbuilder({min:0,max:100,postfix:"px"}),"padding-right":sliderbuilder({min:0,max:100,postfix:"px"}),"padding-bottom":sliderbuilder({min:0,
max:100,postfix:"px"}),"padding-left":sliderbuilder({min:0,max:100,postfix:"px"}),width:sliderbuilder({min:0,max:100,postfix:"%"}),height:sliderbuilder({min:0,max:100,postfix:"%"}),opacity:sliderbuilder({min:0,max:1,postfix:"",nopostfixchange:!0}),"font-family":selectionbuilder("inherit;Impact, Charcoal, sans-serif;\u2018Palatino Linotype\u2019, \u2018Book Antiqua\u2019, Palatino, serif;Tahoma, Geneva, sans-serif;Century Gothic, sans-serif;\u2018Lucida Sans Unicode\u2019, \u2018Lucida Grande\u2019, sans-serif;\u2018Arial Black\u2019, Gadget, sans-serif;\u2018Times New Roman\u2019, Times, serif;\u2018Arial Narrow\u2019, sans-serif;Verdana, Geneva, sans-serif;Copperplate Gothic Light, sans-serif;\u2018Lucida Console\u2019, Monaco, monospace;Gill Sans / Gill Sans MT, sans-serif;\u2018Trebuchet MS\u2019, Helvetica, sans-serif;\u2018Courier New\u2019, Courier, monospace;Arial, Helvetica, sans-serif;Georgia, Serif;'Comic Sans MS', cursive, sans-serif;'Bookman Old Style', serif;Garamond, serif;Symbol, sans-serif;Webdings, sans-serif;Wingdings, 'Zapf Dingbats', sans-serif".split(";")),
"font-style":radiobuilder(["inherit","normal","italic","oblique"]),"font-variant":radiobuilder(["inherit","normal","small-caps"]),"font-weight":radiobuilder(["inherit","normal","bold","bolder","lighter"]),"font-size":sliderbuilder({min:0,max:150,postfix:"%"}),"text-align":radiobuilder(["inherit","left","center","right","justify"]),"text-decoration":radiobuilder("inherit none underline overline line-through blink".split(" ")),"text-indent":sliderbuilder({min:0,max:300,postfix:"px"}),"text-transform":radiobuilder(["inherit",
"none","capitalize","uppercase","lowercase"]),"text-shadow":textshadowbuilder},builders={checkbox:checkbox,color:colourbuilder,slider:sliderbuilder({}),fourslider:foursliderbuilder({}),radio:radiobuilder({})},thehandlers={},changelog={},inactive=!1,defaultvalues={"border-color":"transparent","border-width":"0","border-style":"none","border-top-left-radius":"0px","border-top-right-radius":"0px","border-bottom-right-radius":"0px","border-bottom-left-radius":"0px","box-shadow":"0px 0px 0px 0px #000000",
"background-color":"transparent","background-image":"none","background-repeat":"repeat","margin-top":"0","margin-right":"0","margin-bottom":"0","margin-left":"0",padding:"0",width:"auto",height:"auto",opacity:"1","font-family":"inherit","font-style":"normal","font-variant":"normal","font-weight":"normal","font-size":"100%","text-align":"left","text-decoration":"none","text-indent":"0px","text-transform":"none","text-shadow":"0px 0px 0px #000000"};
function reset_all(){for(var a in thehandlers)for(var d in thehandlers[a])for(var b in defaultvalues)if(d==b)thehandlers[a][d](defaultvalues[b])}function modifycss(a,d,b,e){if(!inactive||e)console.log("change "+d+" for "+a+"->"+b),""!=a&&(""!=a&&!e)&&(previewiframe.contents().find(a).css(d,b),changelog[a]||(changelog[a]={}),changelog[a][d]=""==b||b=={}?"delete":b)}function applytocontrol(a,d,b){thehandlers[a][d](b)}
function registercsshandler(a,d,b){thehandlers[a]||(thehandlers[a]={});thehandlers[a][d]=b}function ishandlerexist(a,d){return thehandlers[a]&&thehandlers[a][d]?!0:!1}var mainbody=$("#mainbody"),cssbase="",oldstyle="",selectorDict=[];function showOverlay(){$("#savingoverlay").overlay({mask:{color:"#fff",loadSpeed:500,opacity:0.5},closeOnClick:!1,load:!0})}
function reverse_css(){for(var a in changelog){var d=changelog[a],b;for(b in d)d.hasOwnProperty(b)&&$(previewiframe).contents().find(a).css(b,"")}}
function getnewcss(){var a="/*--CSS statement below is generated by Styler. Please do not remove this comment--*/",d=oldstyle;previewiframe.contents().find(".preview_container").toggleClass("preview_container");var b=/\/\*--CSS statement below is generated by Styler. Please do not remove this comment--\*\/([\s\S]*)/.exec(oldstyle);if(b){var a=b[0],e=/([\s\S]*)\n\/\*--CSS statement above is generated by Styler. Please do not remove this comment--\*\//,c=e.exec(b[1]);c&&(a=e.exec(b[0])[0],b=c);var b=
b[1],g;for(g in changelog)if(c=RegExp(g+"[ ]*{[^{}]*}").exec(b)){var e=c[0],c=/([^}]*)}/.exec(c[0])[1],f=changelog[g],h;for(h in f)if(f.hasOwnProperty(h)){var i=h+":"+f[h]+";",j=RegExp("([\\s;]+)"+h+" *:[^:;]*;");if(j.test(c))var k=j.exec(c)[1],c=c.replace(j,k+i);else c+=i}c+="}";b=b.replace(e,c)}else{c=g+"{";f=changelog[g];for(h in f)f.hasOwnProperty(h)&&(i=h+":"+f[h]+";",c+=i);c+="}";b+=c}d=d.replace(a,"/*--CSS statement below is generated by Styler. Please do not remove this comment--*/"+b+"\n/*--CSS statement above is generated by Styler. Please do not remove this comment--*/")}else{for(g in changelog){c=
g+"{";f=changelog[g];for(h in f)f.hasOwnProperty(h)&&(i=h+":"+f[h]+";",c+=i);c+="}";a+=c}d=d+a+"\n/*--CSS statement above is generated by Styler. Please do not remove this comment--*/"}return d}function savestyle(){oldstyle=getnewcss();reverse_css();parent.applyStyle(oldstyle)}$("#savebutton").click(function(){savestyle()});
function extract_properties(){inactive=!0;for(var a=cssbase+oldstyle.replace(/\/\*[\s\S]*?\*\//mg,"\n"),d=RegExp("s*([^}]+)s*{([^{}]*)}","mg"),b;b=d.exec(a);){var e=$.trim(b[1]);b=b[2];for(var c=/([^:;]+):([^:;]*)\;/g,g;g=c.exec(b);){var f=$.trim(g[1]);g=$.trim(g[2]);ishandlerexist(e,f)&&applytocontrol(e,f,g)}}inactive=!1}var accordioncounter=0;
function buildcontrol(a,d){if("group"==a.type){var b=$("<div class='styler_group ui-corner-all ui-widget-content'>"),e=$.extend({},d,a.defaultprop);a.title&&b.append("<h3>"+a.title+"</h3>");var c=a.controls,g;for(g in c)b.append(buildcontrol(c[g],e));return b}if("accordion"==a.type){accordioncounter+=1;var f="accordion"+accordioncounter.toString(),b=$("<div class='styler_accordian_group'>"),c=a.controls,h;h=a.title?a.title:"no-title";e=$.extend({},d,a.defaultprop);h=$("<h3 class='"+f+"'><a href='#'>"+
h+"</a></h3>");var i=$("<div class='cont'></div>");for(g in c)$(i).append(buildcontrol(c[g],e));b.append(h);b.append(i);$(b).accordion({active:!1,autoHeight:!1,header:"h3."+f,collapsible:!0});return b}a.name||(a.name=a.css);d&&(a=$.extend({},d,a));if(!a.selector|!a.css)console.log("Minimum control component is not given.");else return g=a.selector,e=a.name,c=a.css,f=$("<div class='styler_control'>"),a.builder?(b=a.builder,h=builders[a.builder]):predefbuilders[a.css]?(b=predefbuilders[a.css].name,
h=predefbuilders[a.css]):h=predefcustomcss?void 0:defaultbuilder,-1==nolabel.indexOf(c)&&("accordion"==a.container?f.append("<h3><a href='#'>"+e+"</a></h3>"):(f.append("<span>"+e+" : </span>"),-1==nobr.indexOf(b)&&f.append("<br />"))),h?f.append(h(g,c,a.option)):f.append(buildcontrol(predefcustomcss[a.css],a)),"accordion"==a.container&&$(f).accordion({active:!1,autoHeight:!1,header:"h3",collapsible:!0}),f}
function buildlayout(a){try{var d=JSON.parse(a)}catch(b){console.log("Invalid layout->"+b.toString());mainbody.append("<h4>Invalid layout->"+b.toString()+"</h4>");return}a=$("<ul>");for(page in d){var e="tab-"+page.replace(" ","_"),c=$("<div id='"+e+"'></div>");a.append("<li><a href='#"+e+"'>"+page+"</a></li>");e=d[page];for(property in e)c.append(buildcontrol(e[property]));mainbody.append(c)}mainbody.prepend(a);$(mainbody).tabs()}
function parseOldStyle(){inactive=!0;for(var a=/\/\*\s*layout\s*\n([^*]*)\n\*\//mg,d;d=a.exec(oldstyle);)buildlayout(d[1]);reset_all();cssbase="";extract_properties();inactive=!1}var previewiframe;function parseCSS(a,d){mainbody.empty();mainbody.append();oldstyle=a;previewiframe=d;parseOldStyle()};