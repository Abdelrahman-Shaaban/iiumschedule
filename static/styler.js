$.widget("styler.StylerSlider",{options:{min:0,max:100,postfix:"px",nopostfixchange:!1,cssprop:"",selector:"",unitselector:[],registercss:!0,label:!0,sliderops:{},decimalpoint:2},_create:function(){function a(){var a=parseInt(n.val(),10),g=parseInt(u.val(),10)-a,a=a+g*(parseInt(h.slider("value"),10)/1E3),a=a.toFixed(d.options.decimalpoint),a=a+d.options.postfix;j.val(a);d._trigger("change",0,a)}var d=this,b=d.options.cssprop,e=d.options.unitselector;if(""==b)throw"cssprop must not be empty";var c=
"";if(0!=e.length){for(var c="<select class='unitselector'>",f=0;f<e.length;)c=c+"<option>"+e[f].name+"</option>",f+=1;c+="</select>"}d.options.label?$(this.element).append("<p><label for='"+b+"'>"+b+"</label><input class='sliderpreval' type=text name='"+b+"'></input>"+c+"</p>"):$(this.element).append("<input class='sliderpreval' type=text name='"+b+"'></input>"+c+"<br />");$(this.element).append("<input type='text' class='minunit minmax'/><div class='cssslider'></div><input type='text' class='maxunit minmax'/>");
var h=$(this.element).children(".cssslider"),j=$(this.element).find("[name="+b+"]"),g=$(this.element).find(".unitselector"),n=$(this.element).find("input.minunit"),u=$(this.element).find("input.maxunit");n.val(d.options.min);u.val(d.options.max);n.change(a);u.change(a);h.slider($.extend({},{max:1E3,min:0,step:0.1,change:a,slide:a},this.options.sliderops));0!=e.length&&g.change(function(){for(var a=g.val(),b=0;b<e.length;)e[b].name==a&&(d.postfix(e[b].postfix,!0),d._trigger("change",0,d.string())),
b+=1});j.change(function(){var a=/(\d+)([^\s\d]*)/,b=j.val();if(a.test(b)){var g=a.exec(b)[2],a=parseFloat(a.exec(b)[1]);d.postfix(g);g=parseFloat(n.val(),10);b=parseFloat(u.val(),10);g>a&&(n.val(parseFloat(a,10)),g=parseFloat(n.val(),10));b<a&&(u.val(parseFloat(a,10)),b=parseFloat(u.val(),10));g=1E3*(parseFloat(a)-parseFloat(g))/(b-g);h.slider("value",g)}else d._trigger("change",0,b)});this.options.registercss&&(c=function(a,b){""!=d.options.cssprop&&modifycss(d.options.selector,d.options.cssprop,
b.toString())},this.options.change||(this.options.change=c),registercsshandler(d.options.selector,b,function(a){d.string(a)}))},postfix:function(a,d){if(void 0==a)return this.options.postfix;if(!(this.options.nopostfixchange&&0==this.options.unitselector.length)){if(this.options.nopostfixchange){for(var b=!1,e=0,c=this.options.unitselector;e<c.length;)c[e].postfix==a&&(b=!0),e+=1;if(!b)return}var e=$(this.element).children(".cssslider"),c=$(this.element).find("input.minunit"),b=$(this.element).find("input.maxunit"),
c=parseFloat(c.val(),10),f=parseFloat(b.val(),10);this.options.postfix=a;b=$(this.element).find("[name="+this.options.cssprop+"]");e=(f-c)*e.slider("value")/1E3+c+this.options.postfix;b.val(e);if(!d&&0!=this.options.unitselector.length){b=$(this.element).find(".unitselector");c=this.options.unitselector;for(e=0;e<c.length;)c[e].postfix==a&&b.val(c[e].name),e+=1}}},string:function(a){if(void 0==a)return $(this.element).find("[name="+this.options.cssprop+"]").val();var d=/([\d.]+)([^\s\d.]*)/,b;if(/^\s*[\d.]+\s*$/.test(a))a=
parseFloat(a,10),b=this.options.postfix;else{$(this.element).find("[name="+this.options.cssprop+"]").val(a);if(!d.test(a))return;b=d.exec(a)[2];a=parseFloat(d.exec(a)[1],10)}this.postfix(b);b=$(this.element).children(".cssslider");var d=$(this.element).find("input.minunit"),e=$(this.element).find("input.maxunit"),c=parseFloat(d.val(),10),f=parseFloat(e.val(),10);c>a&&(d.val(parseFloat(a,10)),c=parseFloat(d.val(),10));f<a&&(e.val(parseFloat(a,10)),f=parseFloat(e.val(),10));a=1E3*(parseFloat(a)-parseFloat(c))/
(f-c);b.slider("value",a)}});
function initbuilders(){function a(a){return function(b,g,n){n&&n.values&&$.extend(a,n.values);_counter+=1;var n=b.replace(" ","_")+g.replace(" ","_")+_counter.toString(),c=$("<div id='"+n+"' style='inline-block'>"),d;for(d in a){var f=a[d],e=n+f.replace(" ","_"),i=$("<input></input>");i.attr("id",e);i.attr("value",f);i.attr("type","radio");i.attr("name",n+"radio");var l=$("<label>");l.text(f);l.attr("for",e);c.append(i);c.append(l)}c.buttonset();c.find("input").change(function(){modifycss(b,g,$(this).val())});
registercsshandler(b,g,function(a){var b=c.find("input[value="+a+"]");0==b.length?console.log("Warning, trying to set unknown value to input->"+a):(c.find("input[checked=checked]").attr("checked","false"),c.find("input")[0].checked=!0,b=c.find("input[value="+a+"]"),b.attr("checked",!0),$(b).button("refresh"),$(c).buttonset("refresh"))});return c}}function d(a){return function(b,g,c){function d(){modifycss(b,g,l+" "+m+" "+p+" "+q)}var f={min:0,max:100,unitselector:[{name:"Percent",postfix:"%"},{name:"Pixel",
postfix:"px"}]};$.extend(f,a,c,{registercss:!1});_counter+=1;var e=_counter.toString(),k=$("<div>"),c=$("<ul>");c.append("<li><a href='#single_"+e+"'>All</a></li>");f.nodoubletab||c.append("<li><a href='#double_"+e+"'>Horizontal/Vertical</a></li>");c.append("<li><a href='#quad_"+e+"'>Top/Right/Bottom/Left</a></li>");var i={all:g+"-all",horizontal:g+"-horizontal",vertical:g+"-vertical",top:g+"-top",right:g+"-right",bottom:g+"-bottom",left:g+"-left"};$.extend(i,f.labels);var l="",m="",p="",q="",r=$("<div id='vertical_"+
e+"'>"),s=$("<div id='vertical_"+e+"'>"),t=$("<div id='vertical_"+e+"'>"),v=$("<div id='vertical_"+e+"'>"),w=$("<div id='vertical_"+e+"'>"),x=$("<div id='horizontal_"+e+"'>"),y=$("<div id='single_"+e+"'>"),A=$("<div id='single_"+e+"' style='padding:1ex;'>");A.append(y);var z=$("<div id='double_"+e+"' style='padding:1ex;'>");z.append(w);z.append(x);e=$("<div id='quad_"+e+"' style='padding:1ex;'>");e.append(r);e.append(s);e.append(t);e.append(v);k.append(c);k.append(A);f.nodoubletab||k.append(z);k.append(e);
k.tabs();registercsshandler(b,g,function(a){numberlist=a.split(" ");0==numberlist.length?console.log("Error, someone call setstring with an empty string."):1==numberlist.length?(y.StylerSlider("string",numberlist[0]),k.tabs("select",0)):2==numberlist.length?(w.StylerSlider("string",numberlist[0]),x.StylerSlider("string",numberlist[1]),k.tabs("select",1)):4==numberlist.length&&(r.StylerSlider("string",numberlist[0]),s.StylerSlider("string",numberlist[1]),t.StylerSlider("string",numberlist[2]),v.StylerSlider("string",
numberlist[3]),k.tabs("select",2))});r.StylerSlider($.extend({},{cssprop:i.top,change:function(){l=r.StylerSlider("string");d()}},f));s.StylerSlider($.extend({},{cssprop:i.right,change:function(){m=s.StylerSlider("string");d()}},f));t.StylerSlider($.extend({},{cssprop:i.bottom,change:function(){p=t.StylerSlider("string");d()}},f));v.StylerSlider($.extend({},{cssprop:i.left,change:function(){q=v.StylerSlider("string");d()}},f));w.StylerSlider($.extend({},{cssprop:i.vertical,change:function(a,b){r.StylerSlider("string",
b);t.StylerSlider("string",b)}},f));x.StylerSlider($.extend({},{cssprop:i.horizontal,change:function(a,b){s.StylerSlider("string",b);v.StylerSlider("string",b)}},f));y.StylerSlider($.extend({},{cssprop:i.all,change:function(a,b){w.StylerSlider("string",b);x.StylerSlider("string",b)}},f));return k}}function b(a){return function(b,c){var d=$("<select>"),e;for(e in a)d.append("<option>"+a[e]+"</option>");d.change(function(){modifycss(b,c,$(this).val())});registercsshandler(b,c,function(a){d.val(a)});
return d}}function e(a,b){var c=$("<input>");c.ColorPicker({onShow:function(a){$(a).fadeIn(500);return!1},onHide:function(a){$(a).fadeOut(500);return!1},onChange:function(d,e){c.css("backgroundColor","#"+e);c.val("#"+e);modifycss(a,b,"#"+e)}});registercsshandler(a,b,function(a){console.log("color picker change to->"+a);c.val(a);"transparent"!=a&&c.ColorPickerSetColor(a);$(c).css("background-color",a)});c.change(function(){var d=c.val();c.ColorPickerSetColor(d);c.css("backgroundColor",d);modifycss(a,
b,d)});return c}function c(a,b){var c=$("<input style='width:100%;'>"),d=/url\((.*)\)/;$(c).change(function(){var b=c.val();d.test(b)?modifycss(a,"background-image",b):modifycss(a,"background-image","url("+b+")")});registercsshandler(a,b,function(a){d.test(a)?c.val(d.exec(a)[1]):c.val(a)});var e=$("<div>");e.append(c);return e}function f(a){return function(b,c,d){b=$.extend({},{cssprop:c,selector:b,registercss:!0,label:!1,unitselector:[{name:"Percent",postfix:"%"},{name:"Pixel",postfix:"px"}]},a,
d);c=$("<span>");c.StylerSlider(b);return c}}predefcustomcss={text:{type:"accordion",title:"text",controls:[{css:"font-family"},{css:"font-size"},{css:"text-align"},{css:"font-style"},{css:"font-weight"},{css:"text-decoration"},{css:"text-transform"}]},background:{type:"accordion",title:"background",controls:[{css:"background-color"},{css:"background-attachment"},{css:"background-origin"},{css:"background-image"},{css:"background-size"},{css:"background-repeat"}]},border:{type:"accordion",title:"border",
controls:[{css:"border-style"},{css:"border-color"},{css:"border-width"}]}};nolabel=["text","border","background"];nobr=["checkbox","colourbuilder"];predefbuilders={"border-color":e,"border-width":d({postfix:"px",min:0,max:20}),"border-style":b("none hidden dotted dashed solid double groove ridge inset outset inherit".split(" ")),"border-radius":d({nodoubletab:!0,labels:{all:"all",top:"top-left",right:"top-right",bottom:"bottom-right",left:"bottom-left"}}),"border-top-left-radius":f({min:0,max:100,
postfix:"px"}),"border-top-right-radius":f({min:0,max:100,postfix:"px"}),"border-bottom-left-radius":f({min:0,max:100,postfix:"px"}),"border-bottom-right-radius":f({min:0,max:100,postfix:"px"}),"box-shadow":function(a){function b(){var c=m+" "+q+" "+r+" "+s+" "+t+" "+p;modifycss(a,"box-shadow",c);d.val(c)}var c=$("<div class='ui-corner-all ui-widget-content' style='padding:1ex'>"),d=$("<input></input>"),e=$("<input></input>"),f=$("<div>"),o=$("<div>"),k=$("<div>"),i=$("<div>"),l=$('<input type="checkbox">');
c.append("Overall shadow:").append(d).append("<br />Color:").append(e).append(f).append(o).append(k).append(i).append("Inset:").append(l);var m="",p="#000",q="0px",r="0px",s="0px",t="0px";registercsshandler(a,"box-shadow",function(a){var a=a.split(" "),b=0;"inset"==a[b].toLowerCase()&&(m="inset",l.attr("checked","checked"),b+=1);var c=a[b],b=b+1;q=c;f.StylerSlider("string",c);c=a[b];b+=1;r=c;o.StylerSlider("string",c);c=/#.*/;if(!c.test(a[b])){var d=a[b],b=b+1;s=d;k.StylerSlider("string",d)}c.test(a[b])||
(c=a[b],b+=1,t=c,i.StylerSlider("string",c));a=a[b];e.val(a);e.ColorPickerSetColor(a)});d.change(function(){var b=d.val();modifycss(a,"box-shadow",b)});l.change(function(){m=l.attr("checked")?"inset":"";b()});f.StylerSlider({min:-50,max:50,cssprop:"shadow_horizontal_offset",registercss:!1,change:function(a,c){q=c;b()}});o.StylerSlider({min:-30,max:30,cssprop:"shadow_vertical_offset",registercss:!1,change:function(a,c){r=c;b()}});k.StylerSlider({min:-30,max:30,cssprop:"shadow_blur_distance",registercss:!1,
change:function(a,c){s=c;b()}});i.StylerSlider({min:-30,max:30,cssprop:"shadow_spread_distance",registercss:!1,change:function(a,c){t=c;b()}});e.ColorPicker({onShow:function(a){$(a).fadeIn(500);return!1},onHide:function(a){$(a).fadeOut(500);return!1},onChange:function(a,c){e.css("backgroundColor","#"+c);e.val("#"+c);p="#"+c;b()}});e.change(function(){e.css("backgroundColor",e.val());p=e.val();b()});return c},"background-color":e,"background-attachment":a(["inherit","scroll","fixed"]),"background-origin":a(["padding-box",
"border-box","content-box"]),"background-image":c,"background-size":function(a,b){function c(){console.log("custom enabled");q.find("div").removeAttr("disabled");q.find("input").removeAttr("disabled")}function d(){console.log("custom disabled");q.find("div").attr("disabled","disabled");q.find("input").attr("disabled","disabled")}function e(){var c=modifycss,d=a,f=b,g;g="custom"==i?k+" "+o:i;c(d,f,g)}var f={cssprop:b,selector:a,registercss:!1,label:!1,unitselector:[{name:"Percent",postfix:"%"},{name:"Pixel",
postfix:"px"}]},o="100%",k="100%",i="custom";_counter+=1;var l="background_size"+_counter,m=$("<div></div>"),p="radio_"+l+"_custom";m.append("<input id='"+p+"' type='radio' name='radio_"+l+"' value='custom'/><label for='"+p+"'>custom</label>");p="radio_"+l+"_cover";m.append("<input id='"+p+"' type='radio' name='radio_"+l+"' value='cover'/><label for='"+p+"'>cover</label>");p="radio_"+l+"_contain";m.append("<input id='"+p+"' type='radio' name='radio_"+l+"' value='contain'/><label for='"+p+"'>contain</label>");
$(m).buttonset();var q=$("<div>");$(m).find("input[type=radio]").change(function(){var a=$(this).val();"custom"==a?c():d();i=a;e()});var r=$("<div>");$(r).StylerSlider($.extend({},f,{change:function(a,b){o=b;e()}}));var s=$("<div>");$(s).StylerSlider($.extend({},f,{change:function(a,b){k=b;e()}}));registercsshandler(a,b,function(a){var b=/\s*([^\s]+)\s+([^\s]+)\s*/.exec(a);b?(o=b[2],k=b[1],i="custom"):i=a;"custom"==i?c():d();$(r).StylerSlider("string",o);$(s).StylerSlider("string",k);$(m).find("input[type=radio]").attr("checked",
"");$(m).find("input[type=radio][value="+i+"]").attr("checked","checked");$(m).buttonset("refresh")});f=$("<div>");f.append(m);q.append("<span>height:</span>").append(r).append("<span>width:</span>").append(s).append("<br />");f.append(q);d();return f},"background-repeat":function(a){function b(){var c="repeat-x"==f,d="repeat-y"==o,e="no-repeat";d&&(e="repeat-y");c&&(e="repeat-x");d&&c&&(e="repeat");modifycss(a,"background-repeat",e)}var c=$("<div>"),d=$('<input type="checkbox">'),e=$('<input type="checkbox">');
c.append("repeat-x : ");c.append(d);c.append("<br />").append("repeat-y : ");c.append(e);var f="",o="";registercsshandler(a,"background-repeat",function(a){a=$.trim(a);"no-repeat"==a&&(o=f="",d.prop("checked",!1),e.prop("checked",!1));"repeat"==a&&(f="repeat-x",o="repeat-y",d.prop("checked",!0),e.prop("checked",!0));"repeat-x"==a&&(f="repeat-x",d.prop("checked",!0),o="",e.prop("checked",!1));"repeat-y"==a&&(o="repeat-y",e.prop("checked",!0),f="",d.prop("checked",!1))});d.change(function(){f=d.attr("checked")?
"repeat-x":"";b()});e.change(function(){o=e.attr("checked")?"repeat-y":"";b()});return c},color:e,margin:d({postfix:"px"}),"margin-top":f({min:0,max:100,postfix:"px"}),"margin-right":f({min:0,max:100,postfix:"px"}),"margin-bottom":f({min:0,max:100,postfix:"px"}),"margin-left":f({min:0,max:100,postfix:"px"}),padding:d({postfix:"px"}),"padding-top":f({min:0,max:100,postfix:"px"}),"padding-right":f({min:0,max:100,postfix:"px"}),"padding-bottom":f({min:0,max:100,postfix:"px"}),"padding-left":f({min:0,
max:100,postfix:"px"}),width:f({min:0,max:100,postfix:"%"}),height:f({min:0,max:100,postfix:"%"}),opacity:f({min:0,max:1,postfix:"",nopostfixchange:!0}),"font-family":b("inherit;Impact, Charcoal, sans-serif;\u2018Palatino Linotype\u2019, \u2018Book Antiqua\u2019, Palatino, serif;Tahoma, Geneva, sans-serif;Century Gothic, sans-serif;\u2018Lucida Sans Unicode\u2019, \u2018Lucida Grande\u2019, sans-serif;\u2018Arial Black\u2019, Gadget, sans-serif;\u2018Times New Roman\u2019, Times, serif;\u2018Arial Narrow\u2019, sans-serif;Verdana, Geneva, sans-serif;Copperplate Gothic Light, sans-serif;\u2018Lucida Console\u2019, Monaco, monospace;Gill Sans / Gill Sans MT, sans-serif;\u2018Trebuchet MS\u2019, Helvetica, sans-serif;\u2018Courier New\u2019, Courier, monospace;Arial, Helvetica, sans-serif;Georgia, Serif;'Comic Sans MS', cursive, sans-serif;'Bookman Old Style', serif;Garamond, serif;Symbol, sans-serif;Webdings, sans-serif;Wingdings, 'Zapf Dingbats', sans-serif".split(";")),
"font-style":a(["inherit","normal","italic","oblique"]),"font-variant":a(["inherit","normal","small-caps"]),"font-weight":a(["inherit","normal","bold","bolder","lighter"]),"font-size":f({min:0,max:150,postfix:"%"}),"text-align":a(["inherit","left","center","right","justify"]),"text-decoration":a("inherit none underline overline line-through blink".split(" ")),"text-indent":f({min:0,max:300,postfix:"px"}),"text-transform":a(["inherit","none","capitalize","uppercase","lowercase"]),"text-shadow":function(a){function b(){modifycss(a,
"text-shadow",k+" "+i+" "+l+" "+m)}var c=$("<input>"),d=$("<div>"),e=$("<div>"),f=$("<div>"),o=$("<div class='ui-corner-all ui-widget-content' style='padding:1ex;'>");o.append("Text-shadow color:").append(c).append(d).append(e).append(f);var k="0px",i="0px",l="0px",m="#000000";registercsshandler(a,"text-shadow",function(a){var a=a.split(" "),b=0,h=a[b],b=b+1;k=h;d.StylerSlider("string",h);h=a[b];b+=1;i=h;e.StylerSlider("string",h);/#.*/.test(a[b])||(h=a[b],b+=1,l=h,f.StylerSlider("string",h));a=a[b];
c.val(a);c.ColorPickerSetColor(a)});d.StylerSlider({min:-50,max:50,nopostfixchange:!0,cssprop:"text-shadow-hoffset",registercss:!1,change:function(a,c){k=c;b()}});e.StylerSlider({min:-50,max:50,nopostfixchange:!0,cssprop:"text-shadow-voffset",registercss:!1,change:function(a,c){i=c;b()}});f.StylerSlider({min:0,max:50,nopostfixchange:!0,cssprop:"text-shadow-blur",registercss:!1,change:function(a,c){l=c;b()}});c.ColorPicker({onShow:function(a){$(a).fadeIn(500);return!1},onHide:function(a){$(a).fadeOut(500);
return!1},onChange:function(a,d){c.css("backgroundColor","#"+d);c.val("#"+d);m="#"+d;b()}});c.change(function(){c.css("backgroundColor",c.val());m=c.val();b()});return o}};builders={checkbox:function(a,b,c){var d=c.checked,e=c.unchecked,f=$("<input type='checkbox'>");$(f).change(function(){var c;c=f.attr("checked")?d:e;modifycss(a,b,c)});registercsshandler(a,b,function(a){a==d?f.attr("checked","checked"):f.attr("checked","")});return f},color:e,slider:f({}),fourslider:d({}),radio:a({}),backgroundurlbuilder:c}}
var _counter=0;initbuilders();
var thehandlers={},changelog={},inactive=!1,defaultvalues={"border-color":"transparent","border-width":"0","border-style":"none","border-top-left-radius":"0px","border-top-right-radius":"0px","border-bottom-right-radius":"0px","border-bottom-left-radius":"0px","box-shadow":"0px 0px 0px 0px #000000","background-color":"transparent","background-image":"none","background-repeat":"repeat","background-size":"auto auto","margin-top":"0","margin-right":"0","margin-bottom":"0","margin-left":"0",padding:"0",
width:"auto",height:"auto",opacity:"1","font-family":"inherit","font-style":"normal","font-variant":"normal","font-weight":"normal","font-size":"100%","text-align":"left","text-decoration":"none","text-indent":"0px","text-transform":"none","text-shadow":"0px 0px 0px #000000"};function reset_all(){for(var a in thehandlers)for(var d in thehandlers[a])for(var b in defaultvalues)if(d==b)thehandlers[a][d](defaultvalues[b])}
function modifycss(a,d,b,e){if(!inactive||e)console.log("change "+d+" for "+a+"->"+b),""!=a&&(""!=a&&!e)&&(previewiframe.contents().find(a).css(d,b),changelog[a]||(changelog[a]={}),changelog[a][d]=""==b||b=={}?"delete":b)}function applytocontrol(a,d,b){thehandlers[a][d](b)}function registercsshandler(a,d,b){thehandlers[a]||(thehandlers[a]={});thehandlers[a][d]&&console.log("for some reason, this handler already exist->"+a+" css->"+d);thehandlers[a][d]=b}
function ishandlerexist(a,d){return thehandlers[a]&&thehandlers[a][d]?!0:!1}var mainbody=$("#mainbody"),cssbase="",oldstyle="",selectorDict=[];function showOverlay(){$("#savingoverlay").overlay({mask:{color:"#fff",loadSpeed:500,opacity:0.5},closeOnClick:!1,load:!0})}function reverse_css(){for(var a in changelog){var d=changelog[a],b;for(b in d)d.hasOwnProperty(b)&&$(previewiframe).contents().find(a).css(b,"")}}
function getnewcss(){var a="/*--CSS statement below is generated by Styler. Please do not remove this comment--*/\n",d=oldstyle;previewiframe.contents().find(".preview_container").toggleClass("preview_container");var b=/\/\*--CSS statement below is generated by Styler. Please do not remove this comment--\*\/([\s\S]*)/.exec(oldstyle);if(b){var a=b[0],e=/([\s\S]*)\n\/\*--CSS statement above is generated by Styler. Please do not remove this comment--\*\//,c=e.exec(b[1]);c&&(a=e.exec(b[0])[0],b=c);var b=
b[1],f;for(f in changelog)if(c=RegExp(f+"[ ]*{[^{}]*}").exec(b)){var e=c[0],c=/([^}]*)}/.exec(c[0])[1],h=changelog[f],j;for(j in h)if(h.hasOwnProperty(j)){var g=j+":"+h[j]+";",n=RegExp("([\\s;]+)"+j+" *:[^:;]*;");if(n.test(c))var u=n.exec(c)[1],c=c.replace(n,u+g);else c=c+g+"\n"}c+="}";b=b.replace(e,c)}else{c="\n"+f+"{\n";h=changelog[f];for(j in h)h.hasOwnProperty(j)&&(g=j+":"+h[j]+";\n",c+=g);c+="}";b+=c}d=d.replace(a,"/*--CSS statement below is generated by Styler. Please do not remove this comment--*/"+
b+"\n/*--CSS statement above is generated by Styler. Please do not remove this comment--*/")}else{for(f in changelog){c="\n"+f+"{\n";h=changelog[f];for(j in h)h.hasOwnProperty(j)&&(g=j+":"+h[j]+";\n",c+=g);c+="}";a+=c}d=d+a+"\n/*--CSS statement above is generated by Styler. Please do not remove this comment--*/"}return d}function savestyle(){oldstyle=getnewcss();reverse_css();parent.applyStyle(oldstyle)}$("#savebutton").click(function(){savestyle()});
function extract_properties(){inactive=!0;for(var a=cssbase+oldstyle.replace(/\/\*[\s\S]*?\*\//mg,"\n"),d=RegExp("s*([^}]+?)s*{([^{}]*)}","mg"),b;b=d.exec(a);){var e=$.trim(b[1]);b=b[2];for(var c=/([^:;]+):([^:;]*|[^:;]*\([^;]*\))[^:;]*\;/g,f;f=c.exec(b);){var h=$.trim(f[1]);f=$.trim(f[2]);ishandlerexist(e,h)&&applytocontrol(e,h,f)}}inactive=!1}var accordioncounter=0;
function buildcontrol(a,d){if("group"==a.type){var b=$("<div class='styler_group ui-corner-all ui-widget-content'>"),e=$.extend({},d,a.defaultprop);a.title&&b.append("<h3>"+a.title+"</h3>");var c=a.controls,f;for(f in c)b.append(buildcontrol(c[f],e));return b}if("accordion"==a.type){accordioncounter+=1;var h="accordion"+accordioncounter.toString(),b=$("<div class='styler_accordian_group'>"),c=a.controls,j;j=a.title?a.title:"no-title";e=$.extend({},d,a.defaultprop);j=$("<h3 class='"+h+"'><a href='#'>"+
j+"</a></h3>");var g=$("<div class='cont'></div>");for(f in c)$(g).append(buildcontrol(c[f],e));b.append(j);b.append(g);$(b).accordion({active:!1,autoHeight:!1,header:"h3."+h,collapsible:!0});return b}a.name||(a.name=a.css);d&&(a=$.extend({},d,a));if(!a.selector|!a.css)console.log("Minimum control component is not given.");else return f=a.selector,e=a.name,c=a.css,h=$("<div class='styler_control'>"),a.builder?(b=a.builder,j=builders[a.builder]):predefbuilders[a.css]?(b=predefbuilders[a.css].name,
j=predefbuilders[a.css]):j=predefcustomcss?void 0:defaultbuilder,-1==nolabel.indexOf(c)&&("accordion"==a.container?h.append("<h3><a href='#'>"+e+"</a></h3>"):(h.append("<span>"+e+" : </span>"),-1==nobr.indexOf(b)&&h.append("<br />"))),j?h.append(j(f,c,a.option)):h.append(buildcontrol(predefcustomcss[a.css],a)),"accordion"==a.container&&$(h).accordion({active:!1,autoHeight:!1,header:"h3",collapsible:!0}),h}
function buildlayout(a){try{var d=JSON.parse(a)}catch(b){return console.log("Invalid layout->"+b.toString()),$("<h4>Invalid layout->"+b.toString()+"</h4>")}var a=$("<div>"),e=$("<ul>");for(page in d){var c="tab-"+page.replace(" ","_"),f=$("<div id='"+c+"'></div>");e.append("<li><a href='#"+c+"'>"+page+"</a></li>");c=d[page];for(property in c)f.append(buildcontrol(c[property]));a.append(f)}a.prepend(e);$(a).tabs();return a}
var matches,asyncstuff=function(){if(matches){var a=buildlayout(matches[1]);mainbody.html(a);reset_all();extract_properties()}else mainbody.html("<h3>No valid styler layout found.</h3>The css does not contain Styler layout description. Therefore styler is not available.");inactive=!1};function parseOldStyle(){inactive=!0;mainbody.html("<h3>parsing...</h3>Please wait");matches=/\/\*\s*layout\s*\n([^*]*)\n\*\//mg.exec(oldstyle);setTimeout("asyncstuff();",100)}var previewiframe;
function parseCSS(a,d){mainbody.empty();mainbody.append();oldstyle=a;previewiframe=d;parseOldStyle()};
