<head>
  
  <style>
    .themediv{
      margin: 1ex 1ex;
      border: 1px solid black;
      background-color:white;
      width:20ex;
      float:left;
      padding: 1ex;
    }
    .themediv p{
      margin:0;
    }
  </style>
  <link type="text/css" href="/static/global.css" rel="stylesheet"/>
  <script type='text/javascript' src='/static/js/jquery-1.7.1.min.js' ></script>
  <script type='application/javascript'>
    function submit(){
     var newwindow=window.open("/static/submittheme.html","Submit Theme",'width=400,height=200,toolbar=yes,location=yes,directories=yes,status=yes,menubar=yes,scrollbars=yes,copyhistory=yes,resizable=yes');
     $(newwindow).load(function(){
      newwindow.$("textarea").html(parent.getcurrentstyle());
      newwindow.$("textarea[name=template]").text(parent.getcurrenttemplate());
     });
    }
    
    function themeselected(themename){
      $.getJSON("/themegallery?name="+themename,function(data){
	parent.applyStyle(data.style);
	parent.applyTemplate(data.template);
      });
    }
    
    $(".themediv").click(function(){
      var theid=$(this).attr("id");
      var themename=theid.substring(6);
      themeselected(themename);
    });
    
  </script>
  
</head>
<body>
  <h2>Choose a theme</h2>
  <div>
  {% for theme in themes %}
    <div class='themediv' id="theme-{{theme.name}}">
      <h3><a href='javascript:themeselected("{{theme.name}}")'>{{theme.name}}</a></h3>
      <p>by {{ theme.submitter }}</p>
    </div>
  {% endfor %}
  </div>
  <div style='clear:both;' />
  <p>Please contribute to the community of IIUM by <a href="javascript:submit()">submitting</a> your own design</p>
</body>